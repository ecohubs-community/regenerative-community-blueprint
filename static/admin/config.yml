backend:
  name: github
  repo: ecohubs-community/regenerative-community-blueprint
  branch: main
  # auth_endpoint: https://sveltia-cms-auth.your-worker.workers.dev <-- should/could be added later

media_folder: "static/uploads"
public_folder: "/uploads"

site_url: "https://ecohubs.community"
logo_url: "/uploads/logo.png"

publish_mode: editorial_workflow

editor:
  preview: true

slug:
  clean_accents: true
  encoding: unicode

i18n:
  structure: single_file
  locales: [en]
  default_locale: en

collections:

  # -------------------------------------------------------
  # 1. DOMAINS (Top-level areas like Vision & Governance)
  # -------------------------------------------------------
  - name: "domains"
    label: "Domains"
    folder: "content/domains"
    create: true
    extension: "json"
    format: "json"
    identifier_field: "title"
    fields:
      - { label: "Title", name: "title", widget: "string" }
      - { label: "Description", name: "description", widget: "text", required: false }
      - { label: "Order", name: "order", widget: "number", required: false }

  # -------------------------------------------------------
  # 2. TOPICS (Linked to a Domain)
  # -------------------------------------------------------
  - name: "topics"
    label: "Topics"
    folder: "content/topics"
    create: true
    extension: "json"
    format: "json"
    identifier_field: "title"
    fields:
      - { label: "Title", name: "title", widget: "string" }
      - label: "Domain"
        name: "domain"
        widget: "relation"
        collection: "domains"
        search_fields: ["title"]
        value_field: "title"
        display_fields: ["title"]
      - { label: "Description", name: "description", widget: "text", required: false }
      - { label: "Order", name: "order", widget: "number", required: false }

  # -------------------------------------------------------
  # 3. MODULES (Linked to a Topic)
  # -------------------------------------------------------
  - name: "modules"
    label: "Modules"
    folder: "content/modules"
    create: true
    extension: "json"
    format: "json"
    identifier_field: "title"
    fields:
      - { label: "Title", name: "title", widget: "string" }
      - label: "Topic"
        name: "topic"
        widget: "relation"
        collection: "topics"
        search_fields: ["title"]
        value_field: "title"
        display_fields: ["title"]
      - { label: "Description", name: "description", widget: "text", required: false }
      - { label: "Order", name: "order", widget: "number", required: false }

  # -------------------------------------------------------
  # 4. ARTICLES (linked to MULTIPLE Modules)
  # -------------------------------------------------------
  - name: "articles"
    label: "Articles"
    folder: "content/articles"
    create: true
    extension: "md"
    format: "frontmatter"
    identifier_field: "title"
    fields:
      - { label: "Title", name: "title", widget: "string" }
      - label: "Modules"
        name: "modules"
        widget: "relation"
        collection: "modules"
        multiple: true
        search_fields: ["title"]
        value_field: "title"
        display_fields: ["title"]
      - label: "Climate Zones"
        name: "climate"
        widget: "select"
        multiple: true
        options:
          - Tropical Wet
          - Tropical Dry
          - Temperate
          - Continental
          - Mountain/Highland
          - Arid/Semiarid
          - Subtropical
      - label: "Budget Levels"
        name: "budget"
        widget: "select"
        multiple: true
        options:
          - Low Budget
          - Medium Budget
          - High Budget
      - label: "Community Size"
        name: "size"
        widget: "select"
        multiple: true
        options:
          - "<10 people"
          - "10–50 people"
          - "50–100 people"
          - "100–200 people"
          - ">200 people"
      - { label: "Summary", name: "summary", widget: "text", required: false }
      - { label: "Body", name: "body", widget: "markdown" }
      - label: "Attachments"
        name: "attachments"
        widget: "list"
        fields:
          - { label: "File", name: "file", widget: "file" }
          - { label: "Caption", name: "caption", widget: "string", required: false }

  # -------------------------------------------------------
  # TEAM & ROLES
  # -------------------------------------------------------
  - name: "authors"
    label: "Blueprint Authors"
    folder: "content/authors"
    create: true
    format: "json"
    extension: "json"
    fields:
      - { label: "Name", name: "name", widget: "string" }
      - { label: "Role", name: "role", widget: "string", options: ["Author"] }
      - { label: "Skills", name: "skills", widget: "list", summary: "{{fields.skill}}", field: { label: "Skill", name: "skill", widget: "string" } }
      - { label: "Bio", name: "bio", widget: "text" }
      - { label: "Photo", name: "photo", widget: "image", required: false }